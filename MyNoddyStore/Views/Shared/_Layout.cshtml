<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link href="~/Content/bootstrap.css" rel="stylesheet" />
    <link href="~/Content/main.css" rel="stylesheet" />
    <link href="~/Content/Site.css" rel="stylesheet" />
    <link href="~/Content/ErrorStyles.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <script src="~/Scripts/helperScriptJs.js"></script>
    <script src="~/Scripts/jquery-3.3.1.min.js"></script>
    <script src="~/Scripts/modernizr-2.8.3.js"></script>
    <title>@ViewBag.Title</title>
    <link rel="icon" href="~/favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="~/favicon.ico" type="image/x-icon" />
</head>
<body>
    <div class="navbar navbar-inverse" role="navigation">
        <a class="navbar-brand" href="#">
            <span class="hidden-xs">MyNoddy Supermarket Sweep</span>
            @*<div class="visible-xs">Supermarket<br />Sweep</div>*@
            <span class="visible-xs">MyNoddy Sweep</span>
        </a>

        <span style="color:white;" class="visible-xs">XS</span>
        <span style="color:white;" class="visible-sm">SM</span>
        <span style="color:white;" class="visible-md">MD</span>
        <span style="color:white;" class="visible-lg">LG</span>

        @Html.Action("Summary", "Cart")
    </div>
    <div class="visible-xs">
        @Html.Action("Menu", "Nav", new { horizontalLayout = true })
    </div>

    <div class="row panel">
        <div class="col-sm-3 hidden-xs">
            @Html.Action("Menu", "Nav")
        </div>
        <div class="col-xs-12 col-sm-8">
            @RenderBody()
        </div>
    </div>


<script>
    var countdownCtrl = document.getElementById("countdownClock");
    var remaining = @Html.Raw(Model.CountDownMilliseconds);
    var countDownDate = new Date();
    countDownDate.setMilliseconds(countDownDate.getMilliseconds() + remaining);

    // Update the countdown immediately and then every quarter of a second (otherwise it lags between page refresh and redirects)
    RunCountdown();
    var xInterval = setInterval(RunCountdown, 250);

    function RunCountdown() {
        // Get todays date and time
        let now = new Date().getTime();

        // Find the duration between now and the count down date
        let  duration = countDownDate - now;

        // Time calculations for days, hours, minutes and seconds
        //var days = Math.floor(duration / (1000 * 60 * 60 * 24));
        //var hours = Math.floor((duration % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        //var minutes = Math.floor((duration % (1000 * 60 * 60)) / (1000 * 60));
        let seconds = Math.floor((duration % (1000 * 60)) / 1000);
        let formattedSeconds = seconds.toString().padStart(2, '0');

        // Display the result"
        countdownCtrl.textContent = formattedSeconds;
        // If the count down is finished, cancel the countdown
        if (duration < 0) {
            clearInterval(xInterval);
            countdownCtrl.textContent = "00";
        }
    }


</script>

</body>
</html>
